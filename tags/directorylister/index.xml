<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DirectoryLister on 爱世界 N</title><link>https://hugo.lwnlh.com/tags/directorylister/</link><description>Recent content in DirectoryLister on 爱世界 N</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>pi@lwnlh.com (ResidualBlood)</managingEditor><webMaster>pi@lwnlh.com (ResidualBlood)</webMaster><lastBuildDate>Sat, 01 Dec 2018 19:27:00 +0000</lastBuildDate><atom:link href="https://hugo.lwnlh.com/tags/directorylister/index.xml" rel="self" type="application/rss+xml"/><item><title>伪 NAS 利用 VPS 实现备份、下载、串流播放一条龙(上)</title><link>https://hugo.lwnlh.com/5_fake_nas_use_vps_to_realize_backup_download_and_streaming_playback_1/</link><pubDate>Sat, 01 Dec 2018 19:27:00 +0000</pubDate><author>pi@lwnlh.com (ResidualBlood)</author><guid>https://hugo.lwnlh.com/5_fake_nas_use_vps_to_realize_backup_download_and_streaming_playback_1/</guid><description>&lt;blockquote>
&lt;p>本文主要讲述使用VPS安装Nextcloud、DirectoryLister、Aria2、AriaNg等服务来实现备份、下载、串流播放等功能&amp;hellip;&amp;hellip;&lt;/p>
&lt;/blockquote>
&lt;p>#新建虚拟主机
首先我们需要新建三个虚拟主机、假设三个虚拟主机网址分别为&lt;code>cloud.test.com&lt;/code>、&lt;code>dd.test.com&lt;/code>、&lt;code>ar.test.com&lt;/code>,
在&lt;code>lnmp&lt;/code>目录下运行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">./vhost.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>接着根据提示创建即可
#安装DirectoryLister
LNMP创建的网站根目录为&lt;code>/data/wwwroot/dd.test.com&lt;/code>
##官网下载安装
&lt;a href="https://www.directorylister.com/">DirectoryLister官网&lt;/a>
##使用魔改版DirectoryLister
这里的魔改版DirectoryLister由&lt;a href="https://github.com/ToyoDAdoubi/DirectoryLister">逗比&lt;/a>大佬提供
网站根目录运行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git clone https://github.com/ToyoDAdoubi/DirectoryLister.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>##文件结构&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─ resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├ themes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └ bootstrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └ .....
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├ DirectoryLister.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├ config.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └ fileTypes.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├ README.html # 文件夹内的 说明简介文件 #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├ index.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─ 测试文件夹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├ 测试文件.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └ README.html # 文件夹内的 说明简介文件 #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└ 测试文件.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 绝对路径分别为：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com/resources/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com/README.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com/index.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com/测试文件夹/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/data/wwwroot/dd.test.com/测试文件.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>一些注意事项见中篇
#安装Aria2及AriaNG
##安装依赖包
首先我么需要安装以下依赖包，来使Aria2能够下载图中的文件类型&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install wget screen unzip gcc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install -y libgnutls-dev nettle-dev libgmp-dev libssh2-1-dev libc-ares-dev libxml2-dev zlib1g-dev libsqlite3-dev pkg-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006uw7syly1fxrhlf6lebj30nj05cdfy.jpg" alt="">
##安装Aria2
###方式一、手动编译安装
运行以下命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install auto-apt checkinstall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/aria2/aria2/releases/download/release-1.33.1/aria2-1.33.1.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf aria2-1.33.1.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> aria2-1.33.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto-apt run ./configure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checkinstall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样会生成一个deb包，卸载和重新安装就非常方便了
###方式二、一键脚本安装（建议）
还是推荐一键脚本安装，比手动编译会少很多问题&amp;hellip;..
使用逗比大佬的一键脚本：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget -N --no-check-certificate https://softs.loan/Bash/aria2.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> chmod +x aria2.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> bash aria2.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果上面这个脚本无法下载，尝试使用备用下载：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/aria2.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> chmod +x aria2.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> bash aria2.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据脚本提示安装即可&lt;/p>
&lt;blockquote>
&lt;p>其中，&lt;code>aria2.conf&lt;/code>配置文件需要做一些修改，我会另开一篇文章详细说明
#安装AriaNG
到网站根目录，这里是&lt;code>ar.test.com&lt;/code>运行&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://github.com/mayswind/AriaNg/releases/download/1.0.0/AriaNg-1.0.0.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后解压，然后访问你的域名填写Aria2的密钥即可
#安装Nextcloud
##添加MySQL
在安装Nextcloud之前，我们需要在MySQL中添加一下账户及数据库
访问你的IP，会出现OneinStack的界面&lt;img src="https://ws1.sinaimg.cn/large/006uw7syly1fxri4shvu9j30zc0j2wgq.jpg" alt="">
点击&lt;code>phpMyAdmin&lt;/code>，登陆后，点击账户，新增用户账户，然后按照如图所示操作
&lt;img src="https://ws1.sinaimg.cn/large/006uw7syly1fxria4fofyj30s90gmwg8.jpg" alt="">
最后点击最下面的&lt;code>执行&lt;/code>
这样，MySQL部分完毕
##安装Nextcloud
首先进入到网站根目录&lt;code>cloud.test.com&lt;/code>
然后下载Nextcloud&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://download.nextcloud.com/server/releases/nextcloud-14.0.4.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载完后解压，输入域名进行接下来的安装即可
至此，Nextcloud安装完毕&lt;/p>
&lt;blockquote>
&lt;p>安装错误等问题见中篇&amp;hellip;&amp;hellip;&lt;/p>
&lt;/blockquote></description></item></channel></rss>